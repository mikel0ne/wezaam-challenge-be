Para solucionar la duplicidad de los flujos de creación de un retiro, se ha creado un supertipo compartido para poder unificarlos. Puesto que no se conocen las necesidades que obligan a tener estas entidades en tablas separadas, se respeta esta decisión de diseño, que además nos permite proporcionar una solución más interesante a nivel de generalización. Además, se reutiliza esta estructura y algunas de las funcionalidades para generar la persistencia de las notificaciones fallidas.

Aparte de los fallos de diseño, que no comprometían la corrección del código, había un error que permitía romper la integridad de los datos. Al crear un retiro no se comprobaba que el método de pago correspondiera al usuario. Esto podría llevar a una inconsistencia de los datos o posiblemente, en caso de tener una restricción a nivel de base de datos, a un fallo no controlado.
